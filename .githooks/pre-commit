#!/bin/bash
# This pre-commit hook fixes whitespace issues and formats Python files

# Find all staged Python files
STAGED_FILES=$(git diff --cached --name-only --diff-filter=d | grep -E '\.py$')

# If no Python files are staged, exit
if [ -z "$STAGED_FILES" ]; then
  exit 0
fi

# Loop through each staged Python file and fix whitespace issues
for FILE in $STAGED_FILES; do
  # Remove trailing whitespace
  sed -i 's/[[:space:]]\+$//' "$FILE"

  # Optionally, you can replace tabs with spaces
  # Uncomment the next line if you want to replace tabs with 4 spaces:
  # sed -i 's/\t/    /g' "$FILE"

  # Run isort to organize imports
  isort "$FILE"

  # Re-add the file to the staging area after fixing whitespace and formatting
  git add "$FILE"
done

# Allow the commit to proceed
exit 0


